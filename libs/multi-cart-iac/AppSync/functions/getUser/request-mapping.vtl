## NOTE: THERE ARE NO "OR"s in dynamodb QUERIES!!! but YES in SCANS ... in expression logic

## NOTE: flexible to handle both login and register flows
#if( $ctx.args.usernameOrEmail ) 
  #set( $normalized = $ctx.args.usernameOrEmail )
#end
#if( $ctx.args.username ) 
  #set( $normalized = $ctx.args.username )
#end
#if( $ctx.args.email ) 
  #set( $normalized = $ctx.args.email )
#end

{
  "version": "2017-02-28",
  "operation": "Scan",
  "filter" : {
    "expression": "email = :usernameOrEmail or username = :usernameOrEmail",
        "expressionValues" : {
            ":usernameOrEmail" : $util.dynamodb.toDynamoDBJson($normalized)
        }
  }

}